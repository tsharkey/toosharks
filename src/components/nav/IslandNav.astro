---
// Navbar.astro - Smart Auto-Hide Implementation
---

<nav id="navbar">
  <!-- Desktop Navigation -->
  <div
    class="fixed top-0 left-1/2 transform -translate-x-1/2 z-50 flex transition-all duration-300 ease-out"
    id="navbar-container"
  >
    <div
      class="navbar bg-primary border-black rounded-2xl shadow-xl w-80 mt-8
                  transition-all duration-300 ease-out
                  hover:scale-105
                  active:scale-100 active:translate-y-0
                  px-4 py-2"
    >
      <div class="flex justify-between items-center w-full">
        <!-- Home -->
        <a
          href="/"
          class="flex flex-col items-center justify-center w-12 h-12 rounded-lg text-base-100 hover:bg-opacity-20 transition-all duration-200 ease-out hover:scale-110 active:scale-95 group"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-house-icon lucide-house"
            ><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path
              d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
            ></path></svg
          >
          <span
            class="text-xs font-medium opacity-80 group-hover:opacity-100 transition-opacity duration-200"
            >Home</span
          >
        </a>

        <!-- Blog -->
        <a
          href="/blog"
          class="flex flex-col items-center justify-center w-12 h-12 rounded-lg text-base-100 hover:bg-opacity-20 transition-all duration-200 ease-out hover:scale-110 active:scale-95 group"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-newspaper-icon lucide-newspaper"
            ><path d="M15 18h-5"></path><path d="M18 14h-8"></path><path
              d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2"
            ></path><rect width="8" height="4" x="10" y="6" rx="1"></rect></svg
          >
          <span
            class="text-xs font-medium opacity-80 group-hover:opacity-100 transition-opacity duration-200"
            >Blog</span
          >
        </a>

        <!-- Notes -->
        <a
          href="/notes"
          class="flex flex-col items-center justify-center w-12 h-12 rounded-lg text-base-100 hover:bg-opacity-20 transition-all duration-200 ease-out hover:scale-110 active:scale-95 group"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-notebook-pen-icon lucide-notebook-pen"
            ><path
              d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"
            ></path><path d="M2 6h4"></path><path d="M2 10h4"></path><path
              d="M2 14h4"></path><path d="M2 18h4"></path><path
              d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"
            ></path></svg
          >
          <span
            class="text-xs font-medium opacity-80 group-hover:opacity-100 transition-opacity duration-200"
            >Notes</span
          >
        </a>

        <!-- Gallery -->
        <a
          href="/gallery"
          class="flex flex-col items-center justify-center w-12 h-12 rounded-lg text-base-100 hover:bg-opacity-20 transition-all duration-200 ease-out hover:scale-110 active:scale-95 group"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-images-icon lucide-images"
            ><path d="M18 22H4a2 2 0 0 1-2-2V6"></path><path
              d="m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18"
            ></path><circle cx="12" cy="8" r="2"></circle><rect
              width="16"
              height="16"
              x="6"
              y="2"
              rx="2"></rect></svg
          >
          <span
            class="text-xs font-medium opacity-80 group-hover:opacity-100 transition-opacity duration-200"
            >Gallery</span
          >
        </a>

        <!-- Me -->
        <a
          href="/about"
          class="flex flex-col items-center justify-center w-12 h-12 rounded-lg text-base-100 hover:bg-opacity-20 transition-all duration-200 ease-out hover:scale-110 active:scale-95 group"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-user-icon lucide-user"
            ><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle
              cx="12"
              cy="7"
              r="4"></circle></svg
          >
          <span
            class="text-xs font-medium opacity-80 group-hover:opacity-100 transition-opacity duration-200"
            >Me</span
          >
        </a>
      </div>
    </div>
  </div>
</nav>

<script>
  // Smart Auto-Hide Navigation
  let lastScrollTop = 0;
  let isVisible = true;
  const navbar = document.getElementById("navbar-container");
  const threshold = 100; // Start hiding after 100px of scroll

  window.addEventListener(
    "scroll",
    () => {
      const scrollTop =
        window.pageYOffset || document.documentElement.scrollTop;

      // Keep navbar visible at the very top
      if (scrollTop < threshold) {
        if (!isVisible) {
          navbar.style.top = "0";
          navbar.style.opacity = "1";
          isVisible = true;
        }
        return;
      }

      // Scrolling down - hide navbar
      if (scrollTop > lastScrollTop && isVisible) {
        navbar.style.top = "-120px"; // Move up by navbar height + margin
        navbar.style.opacity = "0";
        isVisible = false;
      }
      // Scrolling up - show navbar
      else if (scrollTop < lastScrollTop && !isVisible) {
        navbar.style.top = "0";
        navbar.style.opacity = "1";
        isVisible = true;
      }

      lastScrollTop = scrollTop;
    },
    { passive: true },
  );
</script>
